<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ampli.fy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="icon" href="assets\amplifylogo3.png">
</head>
<body>
    <!-- navigation -->
    <nav id="navigation" class="navbar navbar-expand-sm sticky-top navbar-dark" style="background-color: #112031;" >
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html"><img src="assets/amplifylogo2.png" width=150px height=auto
                    alt=""></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse " id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item ">
                        <a class="nav-link px-3" href="index.html">
                            Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link px-3" href="about.html">
                            About
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link px-3" href="bands.html">
                            Bands
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link px-3 active" style="border-radius: 11%;" href="reserve.html">
                            Reserve
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link px-3" href="contact.html">
                            Contact
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main class="container-fluid pt-5 px-4 px-md-5">
        <div class="row">
            <div class="col-12 col-sm-5 col-md-6 order-sm-2">
                <div class="d-flex flex-column order-md-3" id="item-desc">
                    <div class="pb-4"><h1 style="font-weight:800;"><span class="band-name"> </span> Concert Tickets</h1></div>
                    <div class="d-flex flex-wrap">    
                        <div class="d-flex pb-3">
                            <button id="admission" admission_val="" class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Select Admission
                            </button>
                            <ul class="dropdown-menu">
                                <li class="dropdown-item" value="0">General Admission</li>
                                <li class="dropdown-item" value="1">Middle Row </li>
                                <li class="dropdown-item" value="2">Front Row</li>
                                <li class="dropdown-item" value="3">VIP Row</li>
                                <li class="dropdown-item" value="4">Special Admission</li>
                            </ul><!--price will vary depending on the type of ticket-->
                        </div>
                        <div class="d-flex"id="select-spacer"></div>
                        <div>
                            <h2><span style="font-weight:600;">₱<span id="price">399.00</span></span></h2>
                        </div>
                    </div>
                    <div class="d-flex flex-column">
                        <div class="d-flex pb-3">
                            <span style="font-size:24px;"><strong>Date of concert:</strong>&nbsp;<span class="concert-date"></span></span>
                        </div>
                        <div class="pb-3">
                            <span style="font-size:24px;"><strong>Venue:</strong>&nbsp;<span class="venue"></span>&nbsp;,<span class="location"></span></span>
                        </div>
                        <div class="pb-1">
                            <span style="font-size:24px;"><strong>Availability:</strong></span>
                        </div>
                        <div>
                            <span>
                                This ticket will be available up until the day before <span class="concert-date"></span> 
                                and will not be refunded after the given date. We recommend you to book your tickets 
                                2 days before the given date. If you have any other questions or queries please proceed 
                                to the <a href="contact.html">contact</a> page.
                            </span>
                        </div>
                    </div>
                    <div class="my-4"> 
                        <button class="btn btn-dark btn-lg rounded-0 btn-purchase" >Purchase Now</button>
                    </div>
                </div>
            </div>
            <div id="thumbnail" class="col-12 col-sm-7 col-md-6 text-center order-sm-1">
                <!-- <div id="item-frame" class="my-3 mb-sm-3"> 
                    <img class="image-fluid w-100 order-md-1" id="store-item" src="assets/ben&ben-min.jpg" alt="benenbenlogo">
                </div>
                <div id="thumbnail-section" class="d-flex align-items-center flex-wrap pb-3 mb-3">
                    <div>
                        <img class="img-thumbnail" src="assets/ben&ben-min.jpg" width="80px" alt="bononbon">
                    </div>
                    <div>
                        <img class="img-thumbnail" src="assets/ben&benlogo.jpg" width="80px" alt="bininbin">
                    </div>
                </div> -->
            </div>
        </div>
    </main>
    <footer>
        <script>
            $("footer").load("footer.html");
        </script>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous">
    </script>
    <script>
        var DateMD = [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December"
        ] 
        $(document).ready(function(){
            
            //get value from previous website using session storage
            var list = JSON.parse(sessionStorage.getItem("info"));
            $(".band-name").text(list.band_name);
            //convert date from number to words using converter function
            var date = date_converter(list.date)[1]+" "+date_converter(list.date)[0]
            $(".concert-date").text(date);
            $(".location").text(list.country);
            $(".venue").text(list.place)

            //append display picture 
            var display_pic = "<div id='item-frame' class='my-3 mb-sm-3 flex-wrap'>"+
                                    "<img class='image-fluid w-100 order-md-1' id='store-item' src='"+ list.thumbnails[0] +"' alt='benenbenlogo'>"+
                                "</div>";
            $("#thumbnail").append(display_pic);

            //append thumbnails below display picture
            var string = "<div id='thumbnail-section' class='d-flex align-items-center flex-wrap pb-3 mb-3'>";
            for(index of list.thumbnails){
                string +="<div> <img class='img-thumbnail' src='"+ index +"' width='80px' height='50px' alt='bononbon'> </div>";
            }
            string += "</div>";
            $("#thumbnail").append(string);

            //when clicking dropdown icons
            $("li.dropdown-item").click(function(){
                var admiss_type = $(this).html();
                var admiss_val = $(this).attr("value");
                $("#admission").html(admiss_type);
                $("#admission").attr("admission_val",admiss_val);
                $("#price").html(getAdmissionPrice(admiss_val));
            });
            
            //when clicking thumbnails
            $(".img-thumbnail").on('click',function(){
                $("#store-item").attr("src",String($(this).attr("src")));
            });

            //on click button purchase
            $(".btn-purchase").click(function(){
                var temp= "You want to purchase a <b>"+list.band_name+"</b> ticket that will be on <b>"+ date +"</b> for <b>₱" + getAdmissionPrice($("#admission").attr("admission_val"))+"</b>";
                const swalWithBootstrapButtons = Swal.mixin({
                    customClass: {
                        confirmButton: 'btn btn-success',
                        cancelButton: 'btn btn-danger'
                    },
                    buttonsStyling: false
                    })
                    swalWithBootstrapButtons.fire({
                    title: 'Are you sure?',
                    html: temp,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, Purchase!',
                    cancelButtonText: 'No, cancel!',
                    reverseButtons: false
                    }).then((result) => {
                    if (result.isConfirmed) {
                        swalWithBootstrapButtons.fire(
                        'Purchased!',
                        'Your purchase was successful.',
                        'success'
                        )
                    } else if (result.dismiss === Swal.DismissReason.cancel) {
                        swalWithBootstrapButtons.fire(
                        'Cancelled',
                        'You have cancelled your purchase',
                        'error'
                        )
                    }
                    })
            });

            //script for footer email validation
            $.getScript("js/footer.js");
            
        });
        function date_converter(string){
            var month = string[0];
            var day = parseInt(string.slice(2));

            return [day,DateMD[month]];
        }
        function getAdmissionPrice(val){
            switch(val){
                case '0':// general admission
                    return "79.00";
                case '1'://front row
                    return "399.00";
                case '2'://middle row
                    return "699.00";
                case '3'://vip row
                    return "999.00";
                case '4'://special admission
                    return "1,999.00";
                default://default middle row (subject to change)
                    return "399.00";
            }
        }
    </script>
</body>
</html>